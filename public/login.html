<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Sign In - MovieFlix</title>
      <style>
        * {
             box-sizing: border-box;
             margin: 0;
             padding: 0;
        }
         body {
             font-family: Netflix Sans, Helvetica Neue, Segoe UI, Roboto, Ubuntu, sans-serif;
             -webkit-font-smoothing: antialiased;
             background: #000;
             color: #999;
        }
         ul {
             list-style: none;
        }
         h1,h2,h3,h4 {
             color: #fff;
        }
         a {
             color: #fff;
             text-decoration: none;
        }
         p {
             margin: 0.5rem 0;
        }
        /* Style the background of Netflix */
         img {
             width: 100%;
        }
         .banner {
             width: 100%;
             min-height: 100vh;
             position: relative;
             background: url('https://www.tutorialspoint.com/assets/questions/media/1039321-1731037718.jpg') no-repeat center center/cover;
        }
         .banner::after {
             content: '';
             position: absolute;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             z-index: 1;
             background: rgba(0, 0, 0, 0.65);
             box-shadow: inset 30px 10px 150px #000000;
        }
        /* Style the Netflix logo */
         .logo {
             position: relative;
             z-index: 2;
             height: 90px;
        }
         .logo img {
             margin-left: 7%;
             padding-top: 10px;
             width: 170px;
             position: absolute;
             top: 20px;
             left: 40px;
        }
        /* Style login form container */
         .main {
             position: relative;
             z-index: 2;
             width: 450px;
             min-height: 750px;
             background: rgba(0, 0, 0, 0.65);
             margin: 0 auto;
             display: flex;
             flex-direction: column;
             justify-content: flex-start;
             align-items: flex-start;
             text-align: left;
             padding: 60px 65px;
        }
        /* Style login form heading */
         .form1 h1 {
             margin-bottom: 20px;
        }
        /* Style login form */
         .form1 {
             width: 100%;
             margin-bottom: 10px;
        }
        /* Style text input */
         .form1 .input-field {
             padding: 5px 0;
             position: relative;
        }
         .form1 .input-field .text-input {
             margin-bottom: 10px;
             width: 100%;
             height: 56px;
             color: white;
             border: 1px solid rgba(128, 128, 128, 0.7);
             border-radius: 5px;
             padding: 20px 10px 5px 14px;
             font-size: 15.5px;
        }
         .input-field input {
             display: inline-block;
             padding: 10px;
        }
         .input-field span {
             color: #aaa;
             position: absolute;
             pointer-events: none;
             left: 15px;
             top: 21px;
             transition: 0.3s;
        }
         .input-field input:focus+span, .input-field input:not(:placeholder-shown)+span {
             top: 15px;
             left: 15px;
             font-size: 11px;
        }
         .input-field input:not(:focus):not(:placeholder-shown):invalid {
             border: 1px solid rgba(255, 24, 24, 0.821);
        }
         .input-field input:not(:focus):not(:placeholder-shown):invalid ~ .error-message {
             display: block;
        }
         .input-field input:not(:focus):not(:placeholder-shown):valid {
             border-color: var(--color-valid, rgba(128, 128, 128, 0.7));
        }
         input[type=email], input[type=password], input[type=text], input[type=tel] {
             background: #3434343f;
        }
         input[type=email]:focus, input[type=password]:focus, input[type=text]:focus, input[type=tel]:focus {
             outline: 2px solid #f5f5f5;
             outline-offset: 1px;
        }
        /* Style error message */
         .error-message {
             display: none;
             font-size: small;
             padding-left: 5px;
             margin-top: 0px;
             color: rgba(255, 23, 23, 0.796);
        }
        /* Form-level error (API errors) */
         .form-error {
             display: none;
             background: rgba(229, 9, 20, 0.15);
             color: rgba(255, 100, 100, 0.95);
             padding: 10px 14px;
             border-radius: 5px;
             margin-bottom: 16px;
             font-size: 14px;
        }
         .form-error.visible {
             display: block;
        }
        /* Style signin button */
         .form1 .button {
             margin-bottom: 10px;
             width: 100%;
        }
         button {
             width: 100%;
             height: 40px;
             border-radius: 5px;
             font-size: inherit;
             font-weight: bold;
             border: none;
             cursor: pointer;
             outline: none;
             box-shadow: 0 1px 0 rgba(0, 0, 0, 0.45);
             transition-duration: 0.4s;
             color: #fff;
        }
         button:disabled {
             cursor: not-allowed;
             opacity: 0.7;
        }
         .button1 {
             background: #e50914;
        }
         .button1:hover:not(:disabled) {
             background: rgb(171, 0, 0);
        }
        /* Style OR */
         .or {
             padding: 1px;
             text-align: center;
        }
        /* Style Use sign-in code button */
         .button2 {
             background: rgb(66, 56, 56);
        }
         .button2:hover {
             background: rgba(66, 56, 56, 0.688);
        }
        /* Style forgot password */
         .fp {
             text-align: center;
             height: 40px;
             padding: 10px;
             margin-bottom: 10px;
             text-decoration: none;
             width: 100%;
        }
         .fp a:hover {
             text-decoration: underline;
             color: #999;
        }
        /* Style Remember me and checkbox */
         .checkbox {
             display: flex;
             margin-top: 10px;
             vertical-align: middle;
             justify-content: flex-start;
             font-size: 1rem;
        }
         .checkbox label {
             color: #fff;
             text-decoration: none;
        }
         .container {
             display: block;
             position: relative;
             padding-left: 25px;
             margin-bottom: 12px;
             cursor: pointer;
             font-size: 16px;
             -webkit-user-select: none;
             -moz-user-select: none;
             -ms-user-select: none;
             user-select: none;
        }
         .container input {
             position: absolute;
             opacity: 0;
             cursor: pointer;
             height: 0;
             width: 0;
        }
         .checkmark {
             position: absolute;
             top: 0;
             left: 0;
             height: 18px;
             border-radius: 3px;
             border: 1px solid #939393;
             width: 18px;
             background-color: #2828288a;
             transition-duration: 0.4s;
        }
         .container:hover input ~ .checkmark {
             border: 1px solid #f1f1f1;
        }
         .container input:checked ~ .checkmark {
             background-color: #ffffff;
        }
         .checkmark:after {
             content: "";
             position: absolute;
             display: none;
        }
         .container input:checked ~ .checkmark:after {
             display: block;
        }
         .container .checkmark:after {
             left: 5.5px;
             top: 2px;
             width: 3px;
             height: 9px;
             border: solid black;
             border-width: 0 3px 3px 0;
             -webkit-transform: rotate(45deg);
             -ms-transform: rotate(45deg);
             transform: rotate(45deg);
        }
        /* Style bottom of login form */
         .signup {
             width: 100%;
             display: flex;
             align-items: center;
             justify-content: flex-start;
             padding-top: 10px;
        }
         .signup p {
             margin-right: 5px;
        }
         .more {
             font-size: 0.8em;
             line-height: 1.1em;
             padding-top: 10px;
        }
         .more a {
             color: rgb(17, 108, 228);
        }
         .more a:hover, .signup a:hover {
             text-decoration: underline;
        }
        /* Style Netflix footer */
         footer {
             position: absolute;
             margin-top: 50px;
             z-index: 2;
             background: rgba(0, 0, 0, 0.65);
             width: 100%;
             min-height: 200px;
        }
         .ftr-content {
             margin-left: 10%;
             padding-top: 50px;
             padding-bottom: 100px;
             font-size: 1em;
        }
         .ftr-content a {
             color: #999;
        }
         .contact {
             margin-bottom: 30px;
        }
         .contact a:hover {
             text-decoration: underline;
        }
         .ftr a {
             margin-bottom: 30px;
             min-width: 200px;
             width: 24%;
             font-size: 14px;
             text-decoration: underline;
             display: inline-block;
             justify-content: space-between;
        }
         .language select {
             color: #fff;
             width: 120px;
             height: 40px;
             border-radius: 5px;
             font-size: inherit;
             padding-left: 10px;
             background: #2828288a;
        }
      </style>
   </head>
   <body>
      <header class="banner">
         <div class="logo">
            <a href="/"><img src="https://i.ibb.co/SNKRx9w/Netflixlogo.png" alt="MovieFlix"></a>
         </div>
         <div class="main">
            <div class="form1">
               <form id="loginForm" novalidate>
                  <h1>Sign In</h1>
                  <p id="formError" class="form-error" role="alert"></p>
                  <div class="input-field">
                     <input class="text-input" type="text" name="username" id="username" required placeholder=" " autocomplete="username">
                     <span>Username</span>
                  </div>
                  <div class="input-field">
                     <input class="text-input" type="email" name="email" id="email" required placeholder=" " autocomplete="email">
                     <span>Email or mobile number</span>
                     <p class="error-message">Please enter a valid e-mail address</p>
                  </div>
                  <div class="input-field">
                     <input class="text-input" type="tel" name="phone" id="phone" placeholder=" " autocomplete="tel">
                     <span>Phone</span>
                  </div>
                  <div class="input-field">
                     <input class="text-input" type="password" name="password" id="password" required placeholder=" " autocomplete="current-password">
                     <span>Password</span>
                  </div>
                  <div class="button">
                     <button class="button1" type="submit" id="submitBtn">Sign In</button>
                  </div>
                  <div class="or">
                     <p>OR</p>
                  </div>
                  <div class="button"></div>
                  <button class="button2" type="button" onclick="document.location.href='#'">
                     Use a sign-in code
                  </button>
                  <div class="fp"><a href="#">Forgot Password?</a></div>
                  <div class="checkbox">
                     <label class="container">Remember me
                        <input type="checkbox" name="remember" id="remember">
                        <span class="checkmark"></span>
                     </label>
                  </div>
                  <div class="signup">
                     <p>New to MovieFlix?</p>
                     <a href="/">Sign up now</a>
                  </div>
                  <div class="more">
                     <p>
                        This page is protected by Google reCAPTCHA
                        to ensure you're not a bot.
                        <a href="#">Learn more.</a>
                     </p>
                  </div>
               </form>
            </div>
         </div>
         <footer>
            <div class="ftr-content">
               <div class="contact">
                  Questions? Call <a href="tel:000-800-919-1694">000-800-919-1694</a>
               </div>
               <div class="ftr">
                  <a href="#">FAQ</a>
                  <a href="#">Help Centre</a>
                  <a href="#">Terms of Use</a>
                  <a href="#">Privacy</a>
                  <a href="#">Cookie Preferences</a>
                  <a href="#">Corporate Information</a>
               </div>
               <div class="language">
                  <select aria-label="Language">
                     <option>English</option>
                     <option>Hindi</option>
                     <option>తెలుగు</option>
                     <option>Français</option>
                  </select>
               </div>
            </div>
         </footer>
      </header>
      <script>
        (function () {
          var API_BASE = window.location.origin;
          var REDIRECT_URL = '/';

          var form = document.getElementById('loginForm');
          var submitBtn = document.getElementById('submitBtn');
          var formError = document.getElementById('formError');

          function showFormError(message) {
            formError.textContent = message || '';
            formError.classList.toggle('visible', !!message);
          }

          function setLoading(loading) {
            submitBtn.disabled = loading;
            submitBtn.textContent = loading ? 'Signing in...' : 'Sign In';
          }

          form.addEventListener('submit', function (e) {
            e.preventDefault();
            showFormError('');

            var username = document.getElementById('username').value.trim();
            var email = document.getElementById('email').value.trim();
            var phone = document.getElementById('phone').value.trim();
            var password = document.getElementById('password').value;

            if (!username || !email || !password) {
              showFormError('Please fill in username, email and password.');
              return;
            }

            setLoading(true);

            fetch(API_BASE + '/api/auth/signin', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ username: username, email: email, phone: phone, password: password })
            })
              .then(function (res) {
                return res.json().catch(function () { return {}; }).then(function (data) {
                  if (res.ok) {
                    if (data.token) {
                      try { localStorage.setItem('authToken', data.token); } catch (err) {}
                    }
                    window.location.href = REDIRECT_URL;
                    return;
                  }
                  showFormError(data.message || data.error || 'Invalid email or password. Please try again.');
                });
              })
              .catch(function () {
                showFormError('Unable to connect. Please check your connection and try again.');
              })
              .then(function () {
                setLoading(false);
              });
          });
        })();
      </script>
   </body>
</html>
